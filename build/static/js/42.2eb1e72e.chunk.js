(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[42],{1201:function(e,t,a){"use strict";a.r(t);var n=a(959),l=a(147),r=a(237),s=a(238),c=a(240),o=a(239),m=a(241),i=a(2),u=a.n(i),d=a(244),E=a(907),h=a(908),p=a(910),f=a(912),b=a(911),v=a(952),C=a(1001),g=a(1002),y=a(932),k=a(913),O=a(1162),j=a(1157),N=a(938),w=a(964),F=a(965),A=a(966),S=a(928),H=a(31),T=a(940),x=a(949);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M={id:{value:""},className:{value:""},dateFrom:{value:H.a},dateTo:{value:H.a},time:{value:""},description:{value:""},facebook:{value:""},teachers:{value:[]},students:{value:[]}},I=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),m=0;m<n;m++)s[m]=arguments[m];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={isEditing:!1,isAttendanceVisible:!1,formControls:M,classTeachers:[],classStudents:[]},a.spreadOnForm=function(e){var t=M;Object.keys(e).forEach((function(a){t=D({},t,Object(l.a)({},a,D({},t[a],{value:e[a]})))})),a.setState({formControls:t})},a.formElementChangeHandler=function(e){var t=e.target.name,n=e.target.value;a.setState({formControls:D({},a.state.formControls,Object(l.a)({},t,D({},a.state.formControls[t],{value:n})))})},a.clearModalHandler=function(){return a.setState({isEditing:!1,isAttendanceVisible:!1})},a.resetFormHandler=function(){return a.setState({formControls:M})},a.formToggleHandler=function(e){var t=a.props.classes,n=M;if(e&&!Object(H.c)(e)){for(var l in t)t[l].id===e&&(n=t[l]);a.spreadOnForm(n)}else a.resetFormHandler();a.setState({isEditing:!a.state.isEditing})},a.submitClassHandler=function(e){e.preventDefault();var t={};for(var n in a.state.formControls)t[n]=a.state.formControls[n].value;Object(H.c)(t.id)?a.props.onAddClass("",t):a.props.onEditClass("",t),a.clearModalHandler(),a.resetFormHandler(),alert("Class info submitted")},a.viewClassAttendance=function(e){a.fetchClassStudents(e),a.fetchClassTeachers(e)},a.fetchClassStudents=function(e){S.a.get("/classEnrollments/"+e+".json").then((function(e){var t=[];for(var n in e.data)e.data[n].isEnrolled&&function(){var l=D({id:n},e.data[n]);S.a.get("/members/"+n+".json").then((function(e){l=D({},l,{},e.data),t.push(l),a.setState({classStudents:t,isAttendanceVisible:!0})})).catch((function(e){return console.log(e)}))}()})).catch((function(e){return console.log(e)}))},a.fetchClassTeachers=function(e){S.a.get("/classAssignments/"+e+".json").then((function(e){var t=[];for(var n in e.data)e.data[n].isAssigned&&function(){var l=D({id:n},e.data[n]);S.a.get("/members/"+n+".json").then((function(e){l=D({},l,{},e.data),t.push(l),a.setState({classTeachers:t,isAttendanceVisible:!0})})).catch((function(e){return console.log(e)}))}()})).catch((function(e){return console.log(e)}))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.onFetchClasses("","")}},{key:"componentDidUpdate",value:function(e,t,a){}},{key:"render",value:function(){var e=this,t=u.a.createElement(x.a,{show:this.state.isEditing,modalClosed:this.clearModalHandler},u.a.createElement(E.a,null,u.a.createElement(h.a,null,u.a.createElement(p.a,null,u.a.createElement(f.a,null,u.a.createElement("strong",null,"Class Info")),u.a.createElement(b.a,null,u.a.createElement(v.a,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal",onSubmit:this.submitClassHandler,onReset:this.resetFormHandler},u.a.createElement(C.a,{row:!0},u.a.createElement(h.a,{md:"3"},u.a.createElement(g.a,null,"Class ID")),u.a.createElement(h.a,{xs:"12",md:"9"},u.a.createElement("p",{className:"form-control-static"},Object(H.c)(this.state.formControls.id.value)?"ID UNAVAILABLE. NEW CLASS.":this.state.formControls.id.value))),u.a.createElement(C.a,{row:!0},u.a.createElement(h.a,{md:"3"},u.a.createElement(g.a,{htmlFor:"className-input"},"Class Name")),u.a.createElement(h.a,{xs:"12",md:"9"},u.a.createElement(y.a,{type:"text",id:"className-input",name:"className",required:!0,value:this.state.formControls.className.value,onChange:this.formElementChangeHandler,placeholder:"Enter full name"}))),u.a.createElement(C.a,{row:!0},u.a.createElement(h.a,{md:"3"},u.a.createElement(g.a,{htmlFor:"dateFrom-input"},"From")),u.a.createElement(h.a,{xs:"12",md:"9"},u.a.createElement(y.a,{type:"date",id:"dateFrom-input",name:"dateFrom",required:!0,value:this.state.formControls.dateFrom.value,onChange:this.formElementChangeHandler}))),u.a.createElement(C.a,{row:!0},u.a.createElement(h.a,{md:"3"},u.a.createElement(g.a,{htmlFor:"dateTo-input"},"To")),u.a.createElement(h.a,{xs:"12",md:"9"},u.a.createElement(y.a,{type:"date",id:"dateTo-input",name:"dateTo",value:this.state.formControls.dateTo.value,onChange:this.formElementChangeHandler}))),u.a.createElement(C.a,{row:!0},u.a.createElement(h.a,{md:"3"},u.a.createElement(g.a,{htmlFor:"time-input"},"Weekly schedule")),u.a.createElement(h.a,{xs:"12",md:"9"},u.a.createElement(y.a,{type:"text",id:"time-input",name:"time",required:!0,value:this.state.formControls.time.value,onChange:this.formElementChangeHandler,placeholder:"Enter the weekly\r time slot for this class"}))),u.a.createElement(C.a,{row:!0},u.a.createElement(h.a,{md:"3"},u.a.createElement(g.a,{htmlFor:"description-input"},"Textarea")),u.a.createElement(h.a,{xs:"12",md:"9"},u.a.createElement(y.a,{type:"textarea",name:"description",id:"description-input",rows:"9",value:this.state.formControls.description.value,onChange:this.formElementChangeHandler,placeholder:"Description about the class..."}))),u.a.createElement(C.a,{row:!0},u.a.createElement(h.a,{md:"3"},u.a.createElement(g.a,{htmlFor:"facebook-input"},"Facebook")),u.a.createElement(h.a,{xs:"12",md:"9"},u.a.createElement(y.a,{type:"text",id:"facebook-input",name:"facebook",value:this.state.formControls.facebook.value,onChange:this.formElementChangeHandler,placeholder:"Enter Facebook event link"}))),u.a.createElement(C.a,{row:!0},u.a.createElement(k.a,{size:"sm",color:"danger",onClick:this.clearModalHandler},u.a.createElement("i",{className:"fa fa-ban"})," Cancel"),u.a.createElement(k.a,{type:"reset",size:"sm",color:"warning"},u.a.createElement("i",{className:"fa fa-ban"})," Reset"),u.a.createElement(k.a,{type:"submit",size:"sm",color:"primary"},u.a.createElement("i",{className:"fa fa-dot-circle-o"})," Submit")))))))),a=u.a.createElement(E.a,null,u.a.createElement(h.a,{col:"8",sm:"6",md:"4",xl:!0,className:"mb-3 mb-xl-0"},u.a.createElement(k.a,{color:"info",className:"btn-square",onClick:function(){return e.formToggleHandler("")}},u.a.createElement("i",{className:"fa fa-plus"})," Add a new class"))),l=Object.keys(this.props.classes).map((function(t){return Object(n.a)(Array(e.props.classes[t]).map((function(t){return u.a.createElement("tr",{key:t.id},u.a.createElement("td",null,t.className),u.a.createElement("td",null,t.time),u.a.createElement("td",null,t.dateFrom),u.a.createElement("td",null,t.dateTo),u.a.createElement("td",null,t.description),u.a.createElement("td",null,u.a.createElement(k.a,{className:"btn-brand mr-1 mb-1 btn-sm btn-facebook",onClick:function(){return Object(H.d)("facebook",t.facebook)}},u.a.createElement("i",{className:"fa fa-facebook"}))),u.a.createElement("td",null,u.a.createElement(k.a,{color:"info",className:"btn-pill",size:"sm",block:!0,onClick:function(){return e.viewClassAttendance(t.id)}},"View")),e.props.isAdmin&&u.a.createElement("td",null,u.a.createElement(k.a,{color:"info",className:"btn-pill",size:"sm",onClick:function(){return e.formToggleHandler(t.id)}},"Edit")))})))})),r=Object.keys(this.state.classStudents).map((function(t){return Object(n.a)(Array(e.state.classStudents[t]).map((function(e){return u.a.createElement("tr",{key:e.id},u.a.createElement("td",null,parseInt(t)+1),u.a.createElement("td",null,e.socialName),u.a.createElement("td",null,e.fullName),u.a.createElement("td",null,e.phone),u.a.createElement("td",null,e.email),u.a.createElement("td",null,e.hasPaid?u.a.createElement(O.a,{className:"mr-1",color:"success",pill:!0},"Paid"):u.a.createElement(O.a,{className:"mr-1",color:"warning",pill:!0},"Pending")))})))})),s=Object.keys(this.state.classTeachers).map((function(t){return Object(n.a)(Array(e.state.classTeachers[t]).map((function(e){return u.a.createElement("tr",{key:e.id},u.a.createElement("td",null,parseInt(t)+1),u.a.createElement("td",null,e.socialName),u.a.createElement("td",null,e.fullName),u.a.createElement("td",null,e.phone),u.a.createElement("td",null,e.email),u.a.createElement("td",null,e.hasPaid?u.a.createElement(O.a,{className:"mr-1",color:"success",pill:!0},"Paid"):u.a.createElement(O.a,{className:"mr-1",color:"warning",pill:!0},"Pending")))})))})),c=this.props.isLoading?u.a.createElement(j.a,null):u.a.createElement(E.a,null,u.a.createElement(h.a,{className:"table-responsive-sm"},u.a.createElement(p.a,null,u.a.createElement(f.a,null,"List of Classes"),u.a.createElement(b.a,null,u.a.createElement(N.a,{responsive:!0,striped:!0},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Class name"),u.a.createElement("th",null,"Time"),u.a.createElement("th",null,"From"),u.a.createElement("th",null,"To"),u.a.createElement("th",null,"Description"),u.a.createElement("th",null,"Facebook"),u.a.createElement("th",null,"Attendance"),this.props.isAdmin&&u.a.createElement("th",null,"Edit"))),u.a.createElement("tbody",null,l)),u.a.createElement(w.a,null,u.a.createElement(F.a,null,u.a.createElement(A.a,{tag:"button",previous:!0})),u.a.createElement(F.a,{active:!0},u.a.createElement(A.a,{tag:"button"},"1")),u.a.createElement(F.a,null,u.a.createElement(A.a,{tag:"button"},"2")),u.a.createElement(F.a,null,u.a.createElement(A.a,{tag:"button"},"3")),u.a.createElement(F.a,null,u.a.createElement(A.a,{tag:"button"},"4")),u.a.createElement(F.a,null,u.a.createElement(A.a,{tag:"button",next:!0}))))))),o=u.a.createElement(x.a,{show:this.state.isAttendanceVisible,modalClosed:this.clearModalHandler},u.a.createElement(E.a,null,u.a.createElement(h.a,{className:"table-responsive-sm"},u.a.createElement(p.a,null,u.a.createElement(f.a,null,"Teachers"),u.a.createElement(b.a,null,u.a.createElement(N.a,{responsive:!0,striped:!0},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Index"),u.a.createElement("th",null,"Social name"),u.a.createElement("th",null,"Full name"),u.a.createElement("th",null,"Phone"),u.a.createElement("th",null,"Email"),u.a.createElement("th",null,"Payment status"))),u.a.createElement("tbody",null,s)))))),u.a.createElement(E.a,null,u.a.createElement(h.a,{className:"table-responsive-sm"},u.a.createElement(p.a,null,u.a.createElement(f.a,null,"Students"),u.a.createElement(b.a,null,u.a.createElement(N.a,{responsive:!0,striped:!0},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Index"),u.a.createElement("th",null,"Social name"),u.a.createElement("th",null,"Full name"),u.a.createElement("th",null,"Phone"),u.a.createElement("th",null,"Email"),u.a.createElement("th",null,"Payment status"))),u.a.createElement("tbody",null,r)))))));return u.a.createElement("div",null,t,this.props.isAdmin&&a,c,o)}}]),t}(i.Component);t.default=Object(d.b)((function(e){return{isLoading:e.class.isLoading,classes:e.class.classes,isAdmin:"admin"===e.auth.user.displayName}}),(function(e){return{onFetchClasses:function(t,a){return e(T.c(t,a))},onAddClass:function(t,a){return e(T.a(t,a))},onEditClass:function(t,a){return e(T.g(t,a))}}}))(I)},946:function(e,t,a){e.exports={Backdrop:"Backdrop_Backdrop__3yh_S"}},947:function(e,t,a){e.exports={Modal:"Modal_Modal__P0xtN"}},949:function(e,t,a){"use strict";var n=a(237),l=a(238),r=a(240),s=a(239),c=a(241),o=a(2),m=a.n(o),i=function(e){return e.children},u=a(946),d=a.n(u),E=function(e){return e.show?m.a.createElement("div",{className:d.a.Backdrop,onClick:e.clicked}):null},h=a(947),p=a.n(h),f=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.show!==this.props.show||e.children!==this.props.children}},{key:"render",value:function(){return m.a.createElement(i,null,m.a.createElement(E,{show:this.props.show,clicked:this.props.modalClosed}),m.a.createElement("div",{className:p.a.Modal,style:{transform:this.props.show?"translateY(0)":"translateY(-700vh)",opacity:this.props.show?"1":"0"}},this.props.children))}}]),t}(o.Component);t.a=f}}]);
//# sourceMappingURL=42.2eb1e72e.chunk.js.map