{"ast":null,"code":"import _defineProperty from \"C:\\\\Projects\\\\hlh-cms\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from \"../../shared/axios-hlh.js\";\nimport { updateObject } from \"../../shared/utility\";\nimport * as actionTypes from \"./actionTypes\";\n\nvar createMemberStart = function createMemberStart() {\n  return {\n    type: actionTypes.CREATE_MEMBER_START\n  };\n};\n\nvar createMemberFail = function createMemberFail(error) {\n  return {\n    type: actionTypes.CREATE_MEMBER_FAIL,\n    error: error\n  };\n};\n\nvar createMemberSuccess = function createMemberSuccess(memberId, memberInfo) {\n  return {\n    type: actionTypes.CREATE_MEMBER_SUCCESS,\n    memberId: memberId,\n    memberInfo: memberInfo\n  };\n};\n\nvar updateMemberStart = function updateMemberStart() {\n  return {\n    type: actionTypes.UPDATE_MEMBER_START\n  };\n};\n\nvar updateMemberSuccess = function updateMemberSuccess(updatedMember) {\n  return {\n    type: actionTypes.UPDATE_MEMBER_SUCCESS,\n    updatedMember: updatedMember\n  };\n};\n\nvar updateMemberFail = function updateMemberFail(error) {\n  return {\n    type: actionTypes.FETCH_MEMBERS_FAIL,\n    error: error\n  };\n};\n\nvar fetchMembersStart = function fetchMembersStart() {\n  return {\n    type: actionTypes.FETCH_MEMBERS_START\n  };\n};\n\nvar fetchMembersFail = function fetchMembersFail(error) {\n  return {\n    type: actionTypes.FETCH_MEMBERS_FAIL,\n    error: error\n  };\n};\n\nvar fetchMembersSuccess = function fetchMembersSuccess(members) {\n  return {\n    type: actionTypes.FETCH_MEMBERS_SUCCESS,\n    members: members\n  };\n};\n\nexport var createMember = function createMember(token, memberInfo) {\n  return function (dispatch) {\n    dispatch(createMemberStart());\n    memberInfo = updateObject(memberInfo, {\n      isActive: true,\n      isTeacher: false\n    });\n    axios.post(\"/members.json\", memberInfo).then(function (res) {\n      return dispatch(createMemberSuccess(res.data.name, memberInfo));\n    }).catch(function (err) {\n      return dispatch(createMemberFail(err));\n    });\n  };\n};\nexport var fetchMembers = function fetchMembers(token, userId, role) {\n  return function (dispatch) {\n    dispatch(fetchMembersStart()); // const queryParams = \"?auth=\" + token + \"&orderBy='userId'&equalTo=\" + userId + \"'\";\n\n    axios.get(\"/members.json\").then(function (res) {\n      var fetchedMembers = [];\n\n      for (var key in res.data) {\n        if (role === \"teacher\" && !res.data[key].isTeacher) continue;\n        fetchedMembers.push(_objectSpread({}, res.data[key], {\n          id: key\n        }));\n      }\n\n      dispatch(fetchMembersSuccess(fetchedMembers));\n    }).catch(function (err) {\n      console.log(err);\n      dispatch(fetchMembersFail(err));\n    });\n  };\n};\nexport var updateMember = function updateMember(token, memberInfo) {\n  return function (dispatch) {\n    dispatch(updateMemberStart());\n    var id = memberInfo.id;\n    delete memberInfo.id; // console.log(memberInfo);\n\n    axios.put(\"/members/\" + id + \".json\", memberInfo).then(function (res) {\n      return dispatch(updateMemberSuccess(updateObject(res.data, {\n        id: id\n      })));\n    }).catch(function (err) {\n      return dispatch(updateMemberFail(err));\n    });\n  };\n};","map":{"version":3,"sources":["C:/Projects/hlh-cms/src/store/actions/member.js"],"names":["axios","updateObject","actionTypes","createMemberStart","type","CREATE_MEMBER_START","createMemberFail","error","CREATE_MEMBER_FAIL","createMemberSuccess","memberId","memberInfo","CREATE_MEMBER_SUCCESS","updateMemberStart","UPDATE_MEMBER_START","updateMemberSuccess","updatedMember","UPDATE_MEMBER_SUCCESS","updateMemberFail","FETCH_MEMBERS_FAIL","fetchMembersStart","FETCH_MEMBERS_START","fetchMembersFail","fetchMembersSuccess","members","FETCH_MEMBERS_SUCCESS","createMember","token","dispatch","isActive","isTeacher","post","then","res","data","name","catch","err","fetchMembers","userId","role","get","fetchedMembers","key","push","id","console","log","updateMember","put"],"mappings":"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","sourcesContent":["import axios from \"../../shared/axios-hlh.js\";\r\nimport {updateObject} from \"../../shared/utility\";\r\nimport * as actionTypes from \"./actionTypes\";\r\n\r\nconst createMemberStart = () => {\r\n  return {type: actionTypes.CREATE_MEMBER_START};\r\n};\r\n\r\nconst createMemberFail = (error) => {\r\n  return {\r\n    type: actionTypes.CREATE_MEMBER_FAIL,\r\n    error,\r\n  };\r\n};\r\n\r\nconst createMemberSuccess = (memberId, memberInfo) => {\r\n  return {\r\n    type: actionTypes.CREATE_MEMBER_SUCCESS,\r\n    memberId, memberInfo,\r\n  };\r\n};\r\n\r\nconst updateMemberStart = () => {\r\n  return {type: actionTypes.UPDATE_MEMBER_START};\r\n};\r\n\r\nconst updateMemberSuccess = (updatedMember) => {\r\n  return {\r\n    type: actionTypes.UPDATE_MEMBER_SUCCESS,\r\n    updatedMember,\r\n  };\r\n};\r\n\r\nconst updateMemberFail = (error) => {\r\n  return {\r\n    type: actionTypes.FETCH_MEMBERS_FAIL,\r\n    error,\r\n  };\r\n};\r\n\r\nconst fetchMembersStart = () => {\r\n  return {\r\n    type: actionTypes.FETCH_MEMBERS_START,\r\n  };\r\n};\r\n\r\nconst fetchMembersFail = (error) => {\r\n  return {\r\n    type: actionTypes.FETCH_MEMBERS_FAIL,\r\n    error,\r\n  };\r\n};\r\n\r\nconst fetchMembersSuccess = (members) => {\r\n  return {\r\n    type: actionTypes.FETCH_MEMBERS_SUCCESS,\r\n    members,\r\n  };\r\n};\r\n\r\nexport const createMember = (token, memberInfo) => {\r\n  return dispatch => {\r\n    dispatch(createMemberStart());\r\n    memberInfo = updateObject(memberInfo, {\r\n      isActive : true,\r\n      isTeacher: false,\r\n    });\r\n    axios.post(\"/members.json\", memberInfo)\r\n      .then(res => dispatch(createMemberSuccess(res.data.name, memberInfo)))\r\n      .catch(err => dispatch(createMemberFail(err)));\r\n  };\r\n};\r\n\r\nexport const fetchMembers = (token, userId, role) => {\r\n  return dispatch => {\r\n    dispatch(fetchMembersStart());\r\n    // const queryParams = \"?auth=\" + token + \"&orderBy='userId'&equalTo=\" + userId + \"'\";\r\n    axios.get(\"/members.json\")\r\n      .then(res => {\r\n        const fetchedMembers = [];\r\n        for (let key in res.data) {\r\n          if (role === \"teacher\" && !res.data[key].isTeacher) continue;\r\n          fetchedMembers.push({\r\n            ...res.data[key],\r\n            id: key,\r\n          });\r\n        }\r\n        \r\n        dispatch(fetchMembersSuccess(fetchedMembers));\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        dispatch(fetchMembersFail(err));\r\n      });\r\n  };\r\n};\r\n\r\nexport const updateMember = (token, memberInfo) => {\r\n  return dispatch => {\r\n    dispatch(updateMemberStart());\r\n    const id = memberInfo.id;\r\n    delete memberInfo.id;\r\n    // console.log(memberInfo);\r\n    axios.put(\"/members/\" + id + \".json\", memberInfo)\r\n      .then(res => dispatch(updateMemberSuccess(updateObject(res.data, {id: id}))))\r\n      .catch(err => dispatch(updateMemberFail(err)));\r\n  };\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"module"}