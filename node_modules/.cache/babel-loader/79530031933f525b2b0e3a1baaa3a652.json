{"ast":null,"code":"import _defineProperty from \"C:\\\\Projects\\\\hlh-cms\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from \"../../shared/axios-hlh.js\";\nimport { updateObject } from \"../../shared/utility.js\";\nimport * as actionTypes from \"./actionTypes.js\";\nexport var createClass = function createClass(token, classInfo) {\n  return function (dispatch) {\n    dispatch(createClassStart());\n    axios.post(\"/classes.json\", classInfo).then(function (res) {\n      classInfo = updateObject(classInfo, {\n        id: res.data.name\n      });\n      dispatch(createClassSuccess(classInfo));\n    }).catch(function (err) {\n      return dispatch(createClassFail(err));\n    });\n  };\n\n  function createClassStart() {\n    return {\n      type: actionTypes.CREATE_CLASS_START\n    };\n  }\n\n  function createClassSuccess(classInfo) {\n    return {\n      type: actionTypes.CREATE_CLASS_SUCCESS,\n      newClass: classInfo\n    };\n  }\n\n  function createClassFail(error) {\n    return {\n      type: actionTypes.CREATE_CLASS_FAIL,\n      error: error\n    };\n  }\n};\nexport var fetchClasses = function fetchClasses(token, userId) {\n  return function (dispatch) {\n    dispatch(fetchClassesStart());\n    axios.get(\"/classes.json\").then(function (res) {\n      var fetchedClasses = [];\n\n      for (var key in res.data) {\n        fetchedClasses.push(_objectSpread({}, res.data[key], {\n          id: key\n        }));\n      }\n\n      dispatch(fetchClassesSuccess(fetchedClasses));\n    }).catch(function (err) {\n      return dispatch(fetchClassesFail(err));\n    });\n  };\n\n  function fetchClassesStart() {\n    return {\n      type: actionTypes.FETCH_CLASSES_START\n    };\n  }\n\n  function fetchClassesFail(error) {\n    return {\n      type: actionTypes.FETCH_CLASSES_FAIL,\n      error: error\n    };\n  }\n\n  function fetchClassesSuccess(classes) {\n    return {\n      type: actionTypes.FETCH_CLASSES_SUCCESS,\n      classes: classes\n    };\n  }\n};\nexport var updateClass = function updateClass(token, classInfo) {\n  return function (dispatch) {\n    dispatch(updateClassStart());\n    var id = classInfo.id;\n    delete classInfo.id; // console.log(updatedClass);\n\n    axios.put(\"/classes/\" + id + \".json\", classInfo).then(function (res) {\n      var updatedClass = updateObject(res.data, {\n        id: id\n      });\n      dispatch(updateClassSuccess(updatedClass));\n    }).catch(function (err) {\n      return dispatch(updateClassFail(err));\n    });\n  };\n\n  function updateClassStart() {\n    return {\n      type: actionTypes.UPDATE_CLASS_START\n    };\n  }\n\n  function updateClassFail(err) {\n    return {\n      err: err,\n      type: actionTypes.UPDATE_CLASS_FAIL\n    };\n  }\n\n  function updateClassSuccess(updatedClass) {\n    return {\n      updatedClass: updatedClass,\n      type: actionTypes.UPDATE_CLASS_SUCCESS\n    };\n  }\n};","map":{"version":3,"sources":["C:/Projects/hlh-cms/src/store/actions/class.js"],"names":["axios","updateObject","actionTypes","createClass","token","classInfo","dispatch","createClassStart","post","then","res","id","data","name","createClassSuccess","catch","err","createClassFail","type","CREATE_CLASS_START","CREATE_CLASS_SUCCESS","newClass","error","CREATE_CLASS_FAIL","fetchClasses","userId","fetchClassesStart","get","fetchedClasses","key","push","fetchClassesSuccess","fetchClassesFail","FETCH_CLASSES_START","FETCH_CLASSES_FAIL","classes","FETCH_CLASSES_SUCCESS","updateClass","updateClassStart","put","updatedClass","updateClassSuccess","updateClassFail","UPDATE_CLASS_START","UPDATE_CLASS_FAIL","UPDATE_CLASS_SUCCESS"],"mappings":"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","sourcesContent":["import axios from \"../../shared/axios-hlh.js\";\r\nimport {updateObject} from \"../../shared/utility.js\";\r\nimport * as actionTypes from \"./actionTypes.js\";\r\n\r\nexport const createClass = (token, classInfo) => {\r\n  return dispatch => {\r\n    dispatch(createClassStart());\r\n    axios.post(\"/classes.json\", classInfo)\r\n      .then(res => {\r\n        classInfo = updateObject(classInfo, {id: res.data.name});\r\n        dispatch(createClassSuccess(classInfo));\r\n      })\r\n      .catch(err => dispatch(createClassFail(err)));\r\n  };\r\n  \r\n  function createClassStart() {\r\n    return {type: actionTypes.CREATE_CLASS_START};\r\n  }\r\n  \r\n  function createClassSuccess(classInfo) {\r\n    return {type: actionTypes.CREATE_CLASS_SUCCESS, newClass: classInfo};\r\n  }\r\n  \r\n  function createClassFail(error) {\r\n    return {type: actionTypes.CREATE_CLASS_FAIL, error};\r\n  }\r\n};\r\n\r\nexport const fetchClasses = (token, userId) => {\r\n  return dispatch => {\r\n    dispatch(fetchClassesStart());\r\n    axios.get(\"/classes.json\")\r\n      .then(res => {\r\n        const fetchedClasses = [];\r\n        for (let key in res.data) {\r\n          fetchedClasses.push({\r\n            ...res.data[key],\r\n            id: key,\r\n          });\r\n        }\r\n        dispatch(fetchClassesSuccess(fetchedClasses));\r\n      })\r\n      .catch(err => dispatch(fetchClassesFail(err)));\r\n    \r\n  };\r\n  \r\n  function fetchClassesStart() {\r\n    return {type: actionTypes.FETCH_CLASSES_START};\r\n  }\r\n  \r\n  function fetchClassesFail(error) {\r\n    return {type: actionTypes.FETCH_CLASSES_FAIL, error};\r\n  }\r\n  \r\n  function fetchClassesSuccess(classes) {\r\n    return {type: actionTypes.FETCH_CLASSES_SUCCESS, classes};\r\n  }\r\n};\r\n\r\nexport const updateClass = (token, classInfo) => {\r\n  return dispatch => {\r\n    dispatch(updateClassStart());\r\n    const id = classInfo.id;\r\n    delete classInfo.id;\r\n    \r\n    // console.log(updatedClass);\r\n    axios.put(\"/classes/\" + id + \".json\", classInfo)\r\n      .then(res => {\r\n        const updatedClass = updateObject(res.data, {id: id});\r\n        dispatch(updateClassSuccess(updatedClass));\r\n      })\r\n      .catch(err => dispatch(updateClassFail(err)));\r\n  };\r\n  \r\n  function updateClassStart() {\r\n    return {type: actionTypes.UPDATE_CLASS_START};\r\n  }\r\n  \r\n  function updateClassFail(err) {\r\n    return {err, type: actionTypes.UPDATE_CLASS_FAIL};\r\n  }\r\n  \r\n  function updateClassSuccess(updatedClass) {\r\n    return {updatedClass: updatedClass, type: actionTypes.UPDATE_CLASS_SUCCESS};\r\n  }\r\n  \r\n};\r\n"]},"metadata":{},"sourceType":"module"}